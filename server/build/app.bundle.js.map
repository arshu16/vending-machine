{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./controllers/backendController.js","webpack:///./db/index.js","webpack:///./index.js","webpack:///./models/vendingMachine.js","webpack:///./router.js","webpack:///./routes/change.js","webpack:///./routes/insert.js","webpack:///./routes/item.js","webpack:///./routes/ping.js","webpack:///./routes/return.js","webpack:///./server.js","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"sequelize\""],"names":["idToItemMap","name","price","insertMoney","req","res","next","amount","body","data","db","models","vendingMachine","findOne","where","id","newAmount","money","result","update","returning","set","status","send","getItem","newItems","collectableItems","slice","push","returnChange","change","addChange","collectChange","collectItem","getState","dataValues","items","console","log","config","Sequelize","host","dialect","benchmark","pool","max","min","idle","define","freezeTableName","forEach","model","definition","hostname","server","get","port","listen","process","on","error","type","sequelize","FLOAT","validate","isFloat","ARRAY","ENUM","router","express","Router","backendController","use","pingRoute","insertRoute","itemRoute","returnRoute","changeRoute","post","json","version","cors","origin","bodyParser","urlencoded","extended"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\nimport db from '../db';\n\n//TODO : have a better place for this\nconst idToItemMap = {\n    1: {\n        name: 'Caramel',\n        price: 2.50\n    },\n    2: {\n        name: 'Hazelnut',\n        price: 3.10\n    },\n    3: {\n        name: 'Organic Raw',\n        price: 2.00\n    }\n    \n}\n\nasync function insertMoney(req, res, next) {\n    const {amount} = req.body;\n    const data = await db.models.vendingMachine.findOne({where:{id: 1}});\n    const newAmount = data.money + amount;\n    const result =  await db.models.vendingMachine.update({money: newAmount},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\nasync function getItem(req, res, next) {\n    const {id} = req.body;\n    const {name, price} = idToItemMap[id];\n    const data = await db.models.vendingMachine.findOne({where:{id: 1}});\n    const newAmount = data.money - price;\n    const newItems = data.collectableItems.slice();\n    newItems.push(name);\n    const result =  await db.models.vendingMachine.update({money: newAmount, collectableItems: newItems},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\nasync function returnChange(req, res, next) {\n    const data = await db.models.vendingMachine.findOne({where:{id: 1}});\n    const result =  await db.models.vendingMachine.update({money: 0.0, change: data.change + data.money},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\nasync function addChange(req, res, next) {\n    const {amount} = req.body;\n    const data = await db.models.vendingMachine.findOne({where:{id: 1}});\n    const newAmount = data.change + amount;\n    const result =  await db.models.vendingMachine.update({change: newAmount},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\nasync function collectChange(req, res, next) {\n    const result =  await db.models.vendingMachine.update({change: 0.0},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\nasync function collectItem(req, res, next) {\n    const result =  await db.models.vendingMachine.update({collectableItems: []},{ where: {\n        id: 1\n    },  returning: true});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send(result[1]);\n}\n\n\nasync function getState(req, res, next) {\n    const result = await db.models.vendingMachine.findOne({where:{id: 1}});\n    res.set('Content-Type', 'application/json');\n    return res.status(200).send({...result.dataValues, items: idToItemMap});\n}\n\nexport default {\n  getState,  insertMoney, getItem, returnChange, addChange, collectChange, collectItem\n}","import Sequelize from \"sequelize\";\nimport vendingMachine from '../models/vendingMachine';\nimport config from './config.json';\nconsole.log('This is the json', config);\nconst models = [\n    vendingMachine\n];\n\nconst db = new Sequelize('vendingMachine', 'localdbuser', 'localdbpassword', {\n    host: 'postgres',\n    dialect: \"postgres\",\n    benchmark: true,\n    pool: {\n        max: 5,\n        min: 0,\n        idle: 10000,\n    },\n    define: {\n        freezeTableName: true\n    }\n});\n\nmodels.forEach(model => {\n    db.define(model.name, model.definition);\n});\n\nexport default db;","'use strict';\n\nimport server from './server';\n\nconst hostname = server.get('hostname') || 'localhost';\nconst port = server.get('port') || 8080;\n\nserver.listen(port, () => {\n    console.log(`Express Server listening on -- http://${hostname}:${port}`);\n});\n\nprocess.on('unhandledRejection', error => {\n    console.error('We are not handling promise rejection ', error);\n});","'use strict';\n\nimport sequelize from \"sequelize\";\n\nconst definition = {\n    money: {\n        type: sequelize.FLOAT,\n        validate: {\n            isFloat: true,  \n            min: 0.0\n        }\n    },\n    change: {\n        type: sequelize.FLOAT,\n        validate: {\n            isFloat: true,  \n            min: 0.0\n        }\n    },\n    collectableItems: {\n        type: sequelize.ARRAY(sequelize.ENUM('Caramel', 'Hazelnut', 'Organic Raw')),\n    }\n}\n\nexport default {\n    name: 'vendingMachine',\n    definition\n};\n","'use strict';\nimport express from 'express';\nimport pingRoute from './routes/ping';\nimport insertRoute from './routes/insert';\nimport itemRoute from './routes/item';\nimport returnRoute from './routes/return';\nimport changeRoute from './routes/change';\nimport backendController from './controllers/backendController';\n\nconst router = express.Router();\nrouter.get('/', backendController.getState);\nrouter.use('/ping', pingRoute);\nrouter.use('/insert', insertRoute);\nrouter.use('/item', itemRoute);\nrouter.use('/return', returnRoute);\nrouter.use('/change', changeRoute);\n\nexport default router;","'use strict';\nimport express from 'express';\nimport backendController from '../controllers/backendController';\nlet router = express.Router();\n\nrouter.post('/add', backendController.addChange);\nrouter.get('/collect', backendController.collectChange);\n\nexport default router;","'use strict';\nimport express from 'express';\nimport backendController from '../controllers/backendController';\nlet router = express.Router();\n\nrouter.post('/', backendController.insertMoney);\n\nexport default router;","'use strict';\nimport express from 'express';\nimport backendController from '../controllers/backendController';\nlet router = express.Router();\n\nrouter.post('/get', backendController.getItem);\nrouter.get('/collect', backendController.collectItem);\n\nexport default router;","'use strict';\nimport express from 'express';\nlet router = express.Router();\n\nrouter.get('/', (req, res, next) => {\n    res.status(200).json({version: 1.0});\n});\n\nexport default router;","'use strict';\nimport express from 'express';\nimport backendController from '../controllers/backendController';\nlet router = express.Router();\n\nrouter.get('/', backendController.returnChange);\n\nexport default router;","'use strict';\nimport express from 'express';\nimport router from './router';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\n\nconst server = express();\nserver.set('env', 'development');\nserver.set('port', 8080);\nserver.set('hostname', 'localhost');\nserver.use(cors({ origin: true }));\nserver.use(bodyParser.urlencoded({ extended: true }));\nserver.use(bodyParser.json());\nserver.use(router);\n\nexport default server;\n\n","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"sequelize\");"],"sourceRoot":""}